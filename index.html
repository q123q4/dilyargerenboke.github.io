<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dilyar的个人博客</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        // Tailwind 配置
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#667eea',
                        secondary: '#764ba2',
                        dark: '#1a202c',
                        light: '#f8fafc'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-gradient {
                background-clip: text;
                -webkit-background-clip: text;
                color: transparent;
            }
            .bg-blur {
                backdrop-filter: blur(8px);
            }
        }
    </style>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        /* 平滑滚动 */
        html {
            scroll-behavior: smooth;
        }
        
        /* 加载动画 */
        .loader {
            border-top-color: #667eea;
            animation: spinner 0.8s linear infinite;
        }
        
        @keyframes spinner {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 卡片悬停效果 */
        .blog-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .blog-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(102, 126, 234, 0.2);
        }
        
        /* 导航栏滚动效果 */
        .nav-scrolled {
            background-color: rgba(255, 255, 255, 0.95);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen">
    <!-- 导航栏 -->
    <nav id="navbar" class="fixed w-full top-0 z-50 transition-all duration-300 bg-transparent">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <a href="#" class="flex items-center gap-2 font-bold text-2xl text-gradient bg-gradient-to-r from-primary to-secondary">
                <i class="fa fa-pencil-square-o"></i>
                <span>dilyar的个人博客</span>
            </a>
            
            <!-- 桌面菜单 -->
            <div class="hidden md:flex items-center gap-6">
                <a href="#home" class="font-medium hover:text-primary transition-colors">首页</a>
                <a href="#blog" class="font-medium hover:text-primary transition-colors">博客</a>
                <a href="#categories" class="font-medium hover:text-primary transition-colors">分类</a>
                <a href="#about" class="font-medium hover:text-primary transition-colors">关于</a>
                <a href="http://localhost:5002/admin" target="_blank" class="fixed bottom-8 right-8 bg-secondary hover:bg-secondary/90 text-white p-4 rounded-full shadow-lg transition-all duration-300 z-50 flex items-center justify-center w-14 h-14">
        <i class="fa fa-cog text-xl"></i>
    </a>
                <button id="loginBtn" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-full transition-all duration-300 font-medium">
                    登录
                </button>
            </div>
            
            <!-- 移动端菜单按钮 -->
            <button id="menuToggle" class="md:hidden text-xl">
                <i class="fa fa-bars"></i>
            </button>
        </div>
        
        <!-- 移动端菜单 -->
        <div id="mobileMenu" class="md:hidden hidden bg-white shadow-lg rounded-b-lg absolute w-full">
            <div class="container mx-auto px-4 py-3 flex flex-col gap-4">
                <a href="#home" class="font-medium hover:text-primary transition-colors py-2">首页</a>
                <a href="#blog" class="font-medium hover:text-primary transition-colors py-2">博客</a>
                <a href="#categories" class="font-medium hover:text-primary transition-colors py-2">分类</a>
                <a href="#about" class="font-medium hover:text-primary transition-colors py-2">关于</a>
                <button id="mobileLoginBtn" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-full transition-all duration-300 font-medium">
                    登录
                </button>
            </div>
        </div>
    </nav>

    <!-- 登录模态框 -->
    <div id="loginModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl transform transition-all">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">用户登录</h3>
                <button id="closeLogin" class="text-xl hover:text-gray-600">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <div id="loginError" class="hidden bg-red-50 text-red-500 p-3 rounded-lg mb-4 text-sm"></div>
            
            <form id="loginForm" class="space-y-4">
                <div>
                    <label for="email" class="block text-sm font-medium mb-1">邮箱</label>
                    <input type="email" id="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none" placeholder="your@email.com" required>
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium mb-1">密码</label>
                    <input type="password" id="password" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none" placeholder="输入密码" required>
                </div>
                <div class="flex items-center justify-between">
                    <label class="inline-flex items-center">
                        <input type="checkbox" id="rememberPassword" class="form-checkbox h-4 w-4 text-primary focus:ring-primary rounded border-gray-300 transition-colors">
                        <span class="ml-2 text-sm text-gray-600">记住密码</span>
                    </label>
                </div>
                <button type="submit" class="w-full bg-primary hover:bg-primary/90 text-white font-medium py-2 px-4 rounded-lg transition-all duration-300">
                    登录
                </button>
            </form>
            
            <div class="mt-4 text-center text-sm text-gray-600">
                登录后可进行博客管理 <span id="demoLogin" class="text-primary cursor-pointer font-medium">使用演示账号登录</span>
            </div>
        </div>
    </div>

    <!-- 首页英雄区 -->
    <section id="home" class="pt-32 pb-20 bg-gradient-to-br from-primary/10 via-white to-secondary/10">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/2 space-y-6">
                    <h1 class="text-[clamp(2.5rem,5vw,4rem)] font-bold leading-tight">
                        dilyar的<br>
                        <span class="text-gradient bg-gradient-to-r from-primary to-secondary">创意与想法</span>
                    </h1>
                    <p class="text-lg text-gray-600">一个功能完善的个人博客系统，让你的文字拥有更广阔的展示平台。支持博客发布、编辑、分类管理和用户认证。</p>
                    <div class="flex flex-wrap gap-4">
                        <a href="#blog" class="bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-full transition-all duration-300 font-medium flex items-center gap-2">
                            <i class="fa fa-book"></i>
                            浏览博客
                        </a>
                        <a href="#write" class="border-2 border-primary text-primary hover:bg-primary/5 px-6 py-3 rounded-full transition-all duration-300 font-medium flex items-center gap-2">
                            <i class="fa fa-pencil"></i>
                            开始写作
                        </a>
                    </div>
                </div>
                <div class="md:w-1/2">
                    <div class="relative">
                        <div class="absolute -inset-0.5 bg-gradient-to-r from-primary to-secondary rounded-full opacity-20 blur-xl"></div>
                        <img src="https://picsum.photos/id/1073/800/600" alt="博客写作" class="rounded-2xl shadow-xl relative w-full h-auto">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 博客列表 -->
    <section id="blog" class="py-16 bg-white">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">最新博客</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">发现最新的想法和见解，探索丰富多彩的博客内容</p>
            </div>
            
            <!-- 博客过滤器 -->
            <div class="flex flex-wrap justify-between items-center mb-8 gap-4">
                <div id="categoryFilters" class="flex flex-wrap gap-2">
                    <button class="category-btn active bg-primary text-white px-4 py-2 rounded-full text-sm font-medium transition-all" data-category="all">
                        全部
                    </button>
                    <button class="category-btn bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full text-sm font-medium transition-all" data-category="技术">
                        技术
                    </button>
                    <button class="category-btn bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full text-sm font-medium transition-all" data-category="生活">
                        生活
                    </button>
                    <button class="category-btn bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full text-sm font-medium transition-all" data-category="学习">
                        学习
                    </button>
                    <button class="category-btn bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full text-sm font-medium transition-all" data-category="旅行">
                        旅行
                    </button>
                    <button class="category-btn bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-full text-sm font-medium transition-all" data-category="运动">
                        运动
                    </button>
                </div>
                <div class="flex gap-2">
                    <select id="sortBy" class="border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary focus:border-primary outline-none">
                        <option value="latest">最新发布</option>
                        <option value="popular">热门推荐</option>
                    </select>
                </div>
            </div>
            <!-- 博客卡片网格 -->
            <div id="blogGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- 博客卡片会通过JavaScript动态生成 -->
            </div>
        </div>
    </section>

    <!-- 分类统计 -->
    <section id="categories" class="py-16 bg-gray-50">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">博客分类</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">浏览不同分类的博客内容，发现你感兴趣的主题</p>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-all">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-xl">技术</h3>
                        <span class="bg-blue-100 text-blue-600 w-10 h-10 rounded-full flex items-center justify-center font-semibold">24</span>
                    </div>
                    <p class="text-gray-500 text-sm">编程、开发、技术分享</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-all">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-xl">生活</h3>
                        <span class="bg-green-100 text-green-600 w-10 h-10 rounded-full flex items-center justify-center font-semibold">18</span>
                    </div>
                    <p class="text-gray-500 text-sm">日常、感悟、生活技巧</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-all">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-xl">学习</h3>
                        <span class="bg-yellow-100 text-yellow-600 w-10 h-10 rounded-full flex items-center justify-center font-semibold">32</span>
                    </div>
                    <p class="text-gray-500 text-sm">学习方法、资源推荐</p>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-all">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-bold text-xl">旅行</h3>
                        <span class="bg-red-100 text-red-600 w-10 h-10 rounded-full flex items-center justify-center font-semibold">15</span>
                    </div>
                    <p class="text-gray-500 text-sm">旅行日记、攻略分享</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 写博客区域 (需要登录后显示) -->
    <section id="write" class="py-16 bg-white hidden">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold mb-4">撰写新博客</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">分享你的想法和见解，创作精彩的博客内容</p>
            </div>
            
            <div class="max-w-3xl mx-auto bg-white rounded-xl shadow-lg p-8">
                <form id="blogForm" class="space-y-6">
                    <div>
                        <label for="blogTitle" class="block text-sm font-medium mb-2">博客标题</label>
                        <input type="text" id="blogTitle" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none" placeholder="输入博客标题" required>
                    </div>
                    
                    <div>
                        <label for="blogCategory" class="block text-sm font-medium mb-2">博客分类</label>
                        <select id="blogCategory" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none" required>
                            <option value="">选择分类</option>
                            <option value="技术">技术</option>
                            <option value="生活">生活</option>
                            <option value="学习">学习</option>
                            <option value="旅行">旅行</option>
                            <option value="运动">运动</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium mb-2">博客封面图</label>
                        <div id="newBlogImagePreview" class="mb-2 hidden">
                            <div class="relative">
                                <img id="newCurrentImage" src="" alt="封面图预览" class="w-full max-h-48 object-cover rounded-lg">
                                <button type="button" id="removeNewCoverImage" class="absolute top-2 right-2 bg-black/50 text-white p-1 rounded-full hover:bg-black/70 transition-colors">
                                    <i class="fa fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary transition-colors cursor-pointer">
                            <input type="file" id="blogImage" class="hidden" accept="image/*">
                            <i class="fa fa-upload text-3xl text-gray-400 mb-2"></i>
                            <p class="text-gray-500">点击上传封面图片</p>
                            <p class="text-xs text-gray-400 mt-1">支持 JPG, PNG 格式</p>
                        </div>
                    </div>
                    
                    <div>
                        <label for="blogContent" class="block text-sm font-medium mb-2">博客内容</label>
                        <textarea id="blogContent" rows="12" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none resize-none" placeholder="开始撰写你的博客内容..." required></textarea>
                    </div>
                    
                    <div class="flex justify-end gap-4">
                        <button type="button" id="cancelBlog" class="px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium">
                            取消
                        </button>
                        <button type="submit" class="bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg transition-all duration-300 font-medium">
                            发布博客
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- 关于我们 -->
    <section id="about" class="py-16 bg-gradient-to-br from-primary/5 to-secondary/5">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row items-center gap-12">
                <div class="md:w-1/2 order-2 md:order-1">
                    <h2 class="text-3xl md:text-4xl font-bold mb-6">关于dilyar的个人博客</h2>
                    <p class="text-gray-600 mb-4">这是一个功能完善的个人博客系统，采用现代化的前端技术栈构建。系统支持博客的发布、编辑、删除，分类管理，用户认证等核心功能。</p>
                    <p class="text-gray-600 mb-6">通过简洁优雅的界面设计，为用户提供良好的写作和阅读体验。无论是个人日记、技术分享还是生活感悟，都能在这里找到合适的展示方式。</p>
                    <div class="flex flex-wrap gap-4">
                        <div class="flex items-center gap-2">
                            <i class="fa fa-check-circle text-green-500"></i>
                            <span>响应式设计</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fa fa-check-circle text-green-500"></i>
                            <span>用户认证</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fa fa-check-circle text-green-500"></i>
                            <span>分类管理</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fa fa-check-circle text-green-500"></i>
                            <span>图片上传</span>
                        </div>
                    </div>
                </div>
                <div class="md:w-1/2 order-1 md:order-2">
                    <div class="relative">
                        <div class="absolute -inset-0.5 bg-gradient-to-r from-primary to-secondary rounded-2xl opacity-20 blur-lg"></div>
                        <img src="https://picsum.photos/id/3/600/400" alt="关于dilyar的个人博客" class="rounded-xl shadow-xl relative w-full h-auto">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 管理后台模态框 -->
    <div id="adminModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center">
        <div class="bg-white rounded-2xl p-8 w-full max-w-4xl max-h-[90vh] mx-4 shadow-2xl overflow-hidden flex flex-col">
            <div class="flex justify-between items-center mb-6 border-b pb-4">
                <h3 class="text-2xl font-bold">博客管理</h3>
                <div class="flex gap-4">
                    <button id="newBlogBtn" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg transition-all duration-300 font-medium flex items-center gap-2">
                        <i class="fa fa-plus"></i>
                        新建博客
                    </button>
                    <button id="closeAdmin" class="text-xl hover:text-gray-600">
                        <i class="fa fa-times"></i>
                    </button>
                </div>
            </div>
            
            <div class="overflow-auto flex-grow">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">标题</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">分类</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">发布日期</th>
                            <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                        </tr>
                    </thead>
                    <tbody id="adminBlogTable" class="bg-white divide-y divide-gray-200">
                        <!-- 管理表格内容通过JavaScript动态生成 -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- 编辑博客模态框 -->
    <div id="editModal" class="fixed inset-0 bg-black/50 z-50 hidden items-center justify-center overflow-y-auto">
        <div class="bg-white rounded-2xl p-8 w-full max-w-3xl mx-4 shadow-2xl my-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">编辑博客</h3>
                <button id="closeEdit" class="text-xl hover:text-gray-600">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <form id="editForm" class="space-y-6">
                <input type="hidden" id="editBlogId">
                
                <div>
                    <label for="editBlogTitle" class="block text-sm font-medium mb-2">博客标题</label>
                    <input type="text" id="editBlogTitle" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none" placeholder="输入博客标题" required>
                </div>
                
                <div>
                    <label for="editBlogCategory" class="block text-sm font-medium mb-2">博客分类</label>
                    <select id="editBlogCategory" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none" required>
                        <option value="技术">技术</option>
                        <option value="生活">生活</option>
                        <option value="学习">学习</option>
                        <option value="旅行">旅行</option>
                        <option value="运动">运动</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">博客封面图</label>
                    <div id="editImagePreview" class="mb-2 hidden">
                        <div class="relative">
                            <img id="editCurrentImage" src="" alt="当前封面图" class="w-full max-h-48 object-cover rounded-lg">
                            <button type="button" id="removeCoverImage" class="absolute top-2 right-2 bg-black/50 text-white p-1 rounded-full hover:bg-black/70 transition-colors">
                                <i class="fa fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div id="coverImageOptions" class="space-y-3">
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-primary transition-colors cursor-pointer">
                            <input type="file" id="editBlogImage" class="hidden" accept="image/*">
                            <i class="fa fa-upload text-3xl text-gray-400 mb-2"></i>
                            <p class="text-gray-500">点击上传新的封面图片</p>
                            <p class="text-xs text-gray-400 mt-1">支持 JPG, PNG 格式</p>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" id="useUrlRadio" name="imageSource" class="mr-2">
                            <label for="useUrlRadio" class="text-sm text-gray-700 cursor-pointer">使用图片URL</label>
                        </div>
                        <div id="imageUrlInput" class="hidden">
                            <input type="text" id="editImageUrl" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none" placeholder="输入图片URL">
                        </div>
                    </div>
                </div>
                
                <div>
                    <label for="editBlogContent" class="block text-sm font-medium mb-2">博客内容</label>
                    <textarea id="editBlogContent" rows="12" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all outline-none resize-none" placeholder="编辑博客内容..." required></textarea>
                </div>
                
                <div class="flex justify-end gap-4">
                    <button type="button" id="cancelEdit" class="px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-medium">
                        取消
                    </button>
                    <button type="submit" class="bg-primary hover:bg-primary/90 text-white px-6 py-3 rounded-lg transition-all duration-300 font-medium">
                        保存修改
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- 消息提示 -->
    <div id="toast" class="fixed top-20 right-4 bg-gray-800 text-white px-6 py-3 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300 flex items-center gap-3">
        <i id="toastIcon" class="fa fa-info-circle"></i>
        <span id="toastMessage">操作成功</span>
    </div>

    <!-- 页脚 -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center gap-2 font-bold text-2xl mb-6 md:mb-0">
                    <i class="fa fa-pencil-square-o"></i>
                    <span>dilyar</span>
                </div>
                
                <div class="flex gap-8 mb-6 md:mb-0">
                    <a href="#home" class="hover:text-primary transition-colors">首页</a>
                    <a href="#blog" class="hover:text-primary transition-colors">博客</a>
                    <a href="#categories" class="hover:text-primary transition-colors">分类</a>
                    <a href="#about" class="hover:text-primary transition-colors">关于</a>
                </div>
                
                <div class="flex gap-4">
                    <a href="#" class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-primary transition-colors">
                        <i class="fa fa-github"></i>
                    </a>
                    <a href="#" class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-primary transition-colors">
                        <i class="fa fa-twitter"></i>
                    </a>
                    <a href="#" class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-primary transition-colors">
                        <i class="fa fa-linkedin"></i>
                    </a>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>欢迎来到dilyar的阅读空间，希望你能在这里找到有价值的内容和思考！</p>
                <p class="mt-2">&copy; 2024 dilyar. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // 模拟博客数据
        // 使用localStorage实现简单的数据持久化
        let blogData;
        // 尝试从localStorage加载数据
        try {
            const savedData = localStorage.getItem('blogData');
            if (savedData) {
                blogData = JSON.parse(savedData);
            } else {
                // 如果没有保存的数据，使用默认数据
                blogData = [
            {
                id: 1,
                title: "React Hooks 实战指南",
                content: "React Hooks 是 React 16.8 引入的新特性，它可以让你在不编写 class 的情况下使用 state 以及其他的 React 特性。本文将深入探讨 Hooks 的使用方法和最佳实践...",
                category: "技术",
                image: "https://picsum.photos/id/0/600/400",
                date: "2024-01-15",
                author: "dilyar",
                likes: 128
            },
            {
                id: 2,
                title: "日常生活中的编程思维",
                content: "编程不仅仅是一种职业技能，更是一种解决问题的思维方式。在日常生活中，我们也可以运用编程思维来提高效率，优化决策过程...",
                category: "生活",
                image: "https://picsum.photos/id/1/600/400",
                date: "2024-01-10",
                author: "dilyar",
                likes: 96
            },
            {
                id: 3,
                title: "如何高效学习新技术栈",
                content: "在技术快速迭代的今天，持续学习新技术变得尤为重要。本文分享一些高效学习新技术栈的方法和技巧，帮助你快速掌握新技能...",
                category: "学习",
                image: "https://picsum.photos/id/2/600/400",
                date: "2024-01-05",
                author: "dilyar",
                likes: 156
            },
            {
                id: 4,
                title: "JavaScript 异步编程详解",
                content: "异步编程是 JavaScript 的核心特性之一。从回调函数到 Promise，再到 async/await，JavaScript 的异步编程方式不断演进，本文将详细介绍这些异步编程模式...",
                category: "技术",
                image: "https://picsum.photos/id/4/600/400",
                date: "2024-01-01",
                author: "dilyar",
                likes: 189
            },
            {
                id: 5,
                title: "旅行中的数字游民生活",
                content: "数字游民 lifestyle 正成为越来越多年轻人的选择。带着一台笔记本电脑，就能在世界各地工作和生活。本文分享我的数字游民体验和心得...",
                category: "旅行",
                image: "https://picsum.photos/id/5/600/400",
                date: "2023-12-28",
                author: "dilyar",
                likes: 234
            },
            {
                id: 6,
                title: "前端性能优化技巧",
                content: "性能优化是前端开发中的重要话题。本文将介绍一些实用的前端性能优化技巧，包括资源加载优化、渲染优化、代码分割等方面...",
                category: "技术",
                image: "https://picsum.photos/id/6/600/400",
                date: "2023-12-25",
                author: "dilyar",
                likes: 167
            }
        ];
        
                // 将默认数据保存到localStorage
                try {
                    localStorage.setItem('blogData', JSON.stringify(blogData));
                } catch(e) {
                    console.log('保存数据到localStorage失败:', e);
                }
            }
        } catch(e) {
            console.log('从localStorage读取数据失败:', e);
            // 读取失败时使用默认数据
            blogData = [
                { id: 1, title: "React Hooks 实战指南", content: "React Hooks 是 React 16.8 引入的新特性...", category: "技术", image: "https://picsum.photos/id/0/600/400", date: "2024-01-15", author: "dilyar", likes: 128 },
                { id: 2, title: "日常生活中的编程思维", content: "编程不仅仅是一种职业技能...", category: "生活", image: "https://picsum.photos/id/1/600/400", date: "2024-01-10", author: "dilyar", likes: 96 },
                { id: 3, title: "如何高效学习新技术栈", content: "在技术快速迭代的今天...", category: "学习", image: "https://picsum.photos/id/2/600/400", date: "2024-01-05", author: "dilyar", likes: 156 },
                { id: 4, title: "JavaScript 异步编程详解", content: "异步编程是 JavaScript 的核心特性之一...", category: "技术", image: "https://picsum.photos/id/4/600/400", date: "2024-01-01", author: "dilyar", likes: 189 },
                { id: 5, title: "旅行中的数字游民生活", content: "数字游民 lifestyle 正成为越来越多年轻人的选择...", category: "旅行", image: "https://picsum.photos/id/5/600/400", date: "2023-12-28", author: "dilyar", likes: 234 },
                { id: 6, title: "前端性能优化技巧", content: "性能优化是前端开发中的重要话题...", category: "技术", image: "https://picsum.photos/id/6/600/400", date: "2023-12-25", author: "dilyar", likes: 167 }
            ];
        }
        
        // 简单的数据持久化函数
        function saveData() {
            try {
                localStorage.setItem('blogData', JSON.stringify(blogData));
            } catch(e) {
                console.log('保存数据失败:', e);
            }
        }
        // 当前登录状态
        let isLoggedIn = false;
        let currentUserId = null;
        let currentUserName = null;

        // DOM 元素
        // 删除所有与加载更多功能相关的代码
        const navbar = document.getElementById('navbar');
        const menuToggle = document.getElementById('menuToggle');
        const mobileMenu = document.getElementById('mobileMenu');
        const loginBtn = document.getElementById('loginBtn');
        const mobileLoginBtn = document.getElementById('mobileLoginBtn');
        const loginModal = document.getElementById('loginModal');
        const closeLogin = document.getElementById('closeLogin');
        const loginForm = document.getElementById('loginForm');
        const loginError = document.getElementById('loginError');
        const demoLogin = document.getElementById('demoLogin');
        const blogGrid = document.getElementById('blogGrid');
        const categoryBtns = document.querySelectorAll('.category-btn');
        const sortBy = document.getElementById('sortBy');
        const adminModal = document.getElementById('adminModal');
        const closeAdmin = document.getElementById('closeAdmin');
        const newBlogBtn = document.getElementById('newBlogBtn');
        const adminBlogTable = document.getElementById('adminBlogTable');
        const editModal = document.getElementById('editModal');
        const closeEdit = document.getElementById('closeEdit');
        const cancelEdit = document.getElementById('cancelEdit');
        const editForm = document.getElementById('editForm');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toastMessage');
        const toastIcon = document.getElementById('toastIcon');
        const writeSection = document.getElementById('write');
        const blogForm = document.getElementById('blogForm');
        const cancelBlog = document.getElementById('cancelBlog');

        // 初始化页面
        document.addEventListener('DOMContentLoaded', () => {
            // 从localStorage读取登录状态
            const savedLoggedIn = localStorage.getItem('blogUserLoggedIn');
            if (savedLoggedIn === 'true') {
                isLoggedIn = true;
                currentUserId = localStorage.getItem('blogUserId');
                currentUserName = localStorage.getItem('blogUserName');
            }
            
            // 渲染博客列表
            renderBlogs(blogData);
            
            // 更新登录状态UI
            updateLoginUI();
            
            // 渲染管理表格
            renderAdminTable();
            
            // 自动填充保存的凭据
            const savedEmail = localStorage.getItem('rememberedEmail');
            const savedPassword = localStorage.getItem('rememberedPassword');
            if (savedEmail && savedPassword) {
                document.getElementById('email').value = savedEmail;
                document.getElementById('password').value = savedPassword;
                document.getElementById('rememberPassword').checked = true;
            }
            
            // 修复图片上传区域点击事件
            const blogImageUploadArea = document.querySelector('#write .border-dashed');
            const blogImageInput = document.getElementById('blogImage');
            if (blogImageUploadArea && blogImageInput) {
                blogImageUploadArea.addEventListener('click', () => {
                    blogImageInput.click();
                });
                
                // 阻止冒泡，防止点击内部元素时触发多次
                blogImageInput.addEventListener('click', (e) => {
                    e.stopPropagation();
                });
                
                // 添加图片选择后的预览功能
                blogImageInput.addEventListener('change', function() {
                    if (this.files && this.files[0]) {
                        const reader = new FileReader();
                        
                        reader.onload = function(e) {
                            const newCurrentImage = document.getElementById('newCurrentImage');
                            const newBlogImagePreview = document.getElementById('newBlogImagePreview');
                            
                            if (newCurrentImage && newBlogImagePreview) {
                                newCurrentImage.src = e.target.result;
                                newBlogImagePreview.classList.remove('hidden');
                            }
                        }
                        
                        reader.readAsDataURL(this.files[0]);
                    }
                });
                
                // 添加移除预览图片的事件监听
                const removeNewCoverImage = document.getElementById('removeNewCoverImage');
                if (removeNewCoverImage) {
                    removeNewCoverImage.addEventListener('click', (e) => {
                        e.stopPropagation();
                        document.getElementById('newBlogImagePreview').classList.add('hidden');
                        blogImageInput.value = ''; // 重置文件输入框
                    });
                }
            }
            
            // URL选项切换
            const useUrlRadio = document.getElementById('useUrlRadio');
            const imageUrlInput = document.getElementById('imageUrlInput');
            if (useUrlRadio && imageUrlInput) {
                useUrlRadio.addEventListener('change', function() {
                    if (this.checked) {
                        imageUrlInput.classList.remove('hidden');
                        document.getElementById('editBlogImage').value = '';
                    } else {
                        imageUrlInput.classList.add('hidden');
                    }
                });
            }
        });

        // 导航栏滚动效果
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                navbar.classList.add('nav-scrolled', 'py-2');
                navbar.classList.remove('py-3');
            } else {
                navbar.classList.remove('nav-scrolled', 'py-2');
                navbar.classList.add('py-3');
            }
        });

        // 移动端菜单切换
        menuToggle.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // 点击移动端菜单项后关闭菜单
        document.querySelectorAll('#mobileMenu a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });

        // 登录模态框控制
        loginBtn.addEventListener('click', () => {
            loginModal.classList.remove('hidden');
            loginModal.classList.add('flex');
        });

        mobileLoginBtn.addEventListener('click', () => {
            loginModal.classList.remove('hidden');
            loginModal.classList.add('flex');
            mobileMenu.classList.add('hidden');
        });

        closeLogin.addEventListener('click', () => {
            loginModal.classList.add('hidden');
            loginModal.classList.remove('flex');
            loginForm.reset();
            loginError.classList.add('hidden');
        });

        // 点击模态框外部关闭
        loginModal.addEventListener('click', (e) => {
            if (e.target === loginModal) {
                closeLogin.click();
            }
        });

        // 登录表单提交
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const rememberPassword = document.getElementById('rememberPassword').checked;
            
            // 模拟登录验证
            if (email === 'admin@example.com' && password === 'password123') {
                // 模拟登录成功
                isLoggedIn = true;
                currentUserId = 1;
                currentUserName = 'dilyar';
                currentUserRole = 'admin';
                
                // 保存登录状态到 localStorage
                localStorage.setItem('blogLoginStatus', 'true');
                localStorage.setItem('blogUserRole', 'admin');
                localStorage.setItem('blogUserName', 'dilyar');
                localStorage.setItem('blogUserId', '1'); // 假设管理员ID为1
                localStorage.setItem('blogUserName', 'dilyar');
                
                // 如果勾选了记住密码，保存凭据
                if (rememberPassword) {
                    localStorage.setItem('blogUserEmail', email);
                    localStorage.setItem('blogUserPassword', password);
                }
                
                // 更新UI
                updateLoginUI();
                // 关闭登录模态框
                closeLoginModal();
                // 显示成功消息
                showToast('登录成功！', 'success');
            } else {
                showToast('邮箱或密码错误！', 'error');
            }
        });

        // 演示账号登录
        demoLogin.addEventListener('click', () => {
            document.getElementById('email').value = 'demo@example.com';
            document.getElementById('password').value = 'password123';
        });

        // 更新登录状态UI
        function updateLoginUI() {
            if (isLoggedIn) {
                loginBtn.innerHTML = `<i class="fa fa-user-circle"></i> ${currentUserName}`;
                mobileLoginBtn.innerHTML = `<i class="fa fa-user-circle"></i> ${currentUserName}`;
                
                // 添加管理员按钮
                loginBtn.onclick = () => openAdminPanel();
                mobileLoginBtn.onclick = () => {
                    openAdminPanel();
                    mobileMenu.classList.add('hidden');
                };
                
                // 显示写博客区域
                writeSection.classList.remove('hidden');
            } else {
                loginBtn.innerHTML = '登录';
                mobileLoginBtn.innerHTML = '后端管理';
                
                // 添加管理员按钮
                loginBtn.onclick = () => openAdminPanel();
                mobileLoginBtn.onclick = () => {
                    openAdminPanel();
                    mobileMenu.classList.add('hidden');
                };
                
                // 显示写博客区域
                writeSection.classList.add('hidden');
            }
        }

        // 打开管理面板
        function openAdminPanel() {
            adminModal.classList.remove('hidden');
            adminModal.classList.add('flex');
            renderAdminTable();
        }

        // 关闭管理面板
        closeAdmin.addEventListener('click', () => {
            adminModal.classList.add('hidden');
            adminModal.classList.remove('flex');
        });

        // 点击模态框外部关闭
        adminModal.addEventListener('click', (e) => {
            if (e.target === adminModal) {
                closeAdmin.click();
            }
        });

        // 渲染博客列表
        function renderBlogs(blogs) {
            blogGrid.innerHTML = '';
            
            blogs.forEach(blog => {
                const blogCard = document.createElement('div');
                blogCard.className = 'blog-card bg-white rounded-xl shadow-md overflow-hidden';
                
                // 为整个卡片添加点击事件，跳转到详情页
                blogCard.addEventListener('click', function(e) {
                    // 如果点击的是按钮，不跳转
                    if (e.target.closest('button') || e.target.closest('i')) {
                        return;
                    }
                    window.location.href = 'blog-detail.html?id=' + blog.id;
                });
                
                // 构建博客卡片内容
                let cardContent = `
                    <div class="relative h-48 overflow-hidden">
                        <img src="${blog.image}" alt="${blog.title}" class="w-full h-full object-cover transition-transform duration-500 hover:scale-110">
                        <div class="absolute top-4 left-4 bg-primary text-white text-xs font-medium px-3 py-1 rounded-full">
                            ${blog.category}
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-2 line-clamp-2">${blog.title}</h3>
                        <p class="text-gray-600 mb-4 line-clamp-3">${blog.content}</p>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center gap-2 text-sm text-gray-500">
                                <span>${blog.date}</span>
                                <span>•</span>
                                <span>${blog.author}</span>
                            </div>
                            <div class="flex items-center gap-3">
                                <button class="text-gray-400 hover:text-red-500 transition-colors flex items-center gap-1" data-id="${blog.id}">
                                    <i class="fa fa-heart-o"></i>
                                    <span>${blog.likes}</span>
                                </button>
                                <button class="text-gray-400 hover:text-primary transition-colors">
                                    <i class="fa fa-comment-o"></i>
                                </button>
                                <button class="blog-edit-btn bg-primary/10 hover:bg-primary/20 text-primary px-3 py-1 rounded-lg text-sm transition-colors" data-id="${blog.id}">
                                    <i class="fa fa-pencil"></i> 编辑
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                blogCard.innerHTML = cardContent;
                blogGrid.appendChild(blogCard);
            });
            
            // 添加点赞事件
            document.querySelectorAll('.fa-heart-o').forEach(heart => {
                heart.parentElement.addEventListener('click', function() {
                    const blogId = parseInt(this.dataset.id);
                    const blog = blogData.find(b => b.id === blogId);
                    if (blog) {
                        blog.likes += 1;
                        this.querySelector('span').textContent = blog.likes;
                        showToast('点赞成功！', 'success');
                    }
                });
            });
            
            // 添加编辑按钮事件
            document.querySelectorAll('.blog-edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // 如果未登录，提示先登录
                    if (!isLoggedIn) {
                        showToast('请先登录后编辑博客', 'info');
                        loginBtn.click(); // 自动打开登录模态框
                        return;
                    }
                    
                    const blogId = parseInt(this.dataset.id);
                    const blog = blogData.find(b => b.id === blogId);
                    if (blog) {
                        openEditModal(blog);
                    }
                });
            });
        }

        // 渲染管理表格
        function renderAdminTable() {
            adminBlogTable.innerHTML = '';
            
            blogData.forEach(blog => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50 transition-colors';
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="font-medium text-gray-900">${blog.title}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">
                            ${blog.category}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        ${blog.date}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <div class="flex justify-end gap-3">
                            <button class="edit-btn text-primary hover:text-primary/80 transition-colors" data-id="${blog.id}">
                                <i class="fa fa-pencil mr-1"></i> 编辑
                            </button>
                            <button class="delete-btn text-red-500 hover:text-red-700 transition-colors" data-id="${blog.id}">
                                <i class="fa fa-trash mr-1"></i> 删除
                            </button>
                        </div>
                    </td>
                `;
                
                adminBlogTable.appendChild(row);
            });
            
            // 添加编辑事件
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const blogId = parseInt(this.dataset.id);
                    const blog = blogData.find(b => b.id === blogId);
                    if (blog) {
                        openEditModal(blog);
                    }
                });
            });
            
            // 添加删除事件
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const blogId = parseInt(this.dataset.id);
                    if (confirm('确定要删除这篇博客吗？')) {
                        deleteBlog(blogId);
                        showToast('博客已删除！', 'success');
                    }
                });
            });
        }

        // 删除博客
        function deleteBlog(id) {
            const index = blogData.findIndex(blog => blog.id === id);
            if (index !== -1) {
                blogData.splice(index, 1);
                
                // 保存更新后的数据
                saveData();
                
                renderAdminTable();
                renderBlogs(blogData);
            }
        }

        // 打开编辑模态框
        function openEditModal(blog) {
            document.getElementById('editBlogId').value = blog.id;
            document.getElementById('editBlogTitle').value = blog.title;
            document.getElementById('editBlogCategory').value = blog.category;
            document.getElementById('editBlogContent').value = blog.content;
            
            const editImagePreview = document.getElementById('editImagePreview');
            const editCurrentImage = document.getElementById('editCurrentImage');
            
            if (blog.image) {
                editCurrentImage.src = blog.image;
                editImagePreview.classList.remove('hidden');
            } else {
                editImagePreview.classList.add('hidden');
            }
            
            editModal.classList.remove('hidden');
            editModal.classList.add('flex');
        }

        // 关闭编辑模态框
        closeEdit.addEventListener('click', () => {
            closeEditModal();
        });

        cancelEdit.addEventListener('click', () => {
            closeEditModal();
        });

        function closeEditModal() {
            editModal.classList.add('hidden');
            editModal.classList.remove('flex');
            editForm.reset();
            document.getElementById('editImagePreview').classList.add('hidden');
        }

        // 点击模态框外部关闭
        editModal.addEventListener('click', (e) => {
            if (e.target === editModal) {
                closeEditModal();
            }
        });

        // 编辑表单提交
        editForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const id = parseInt(document.getElementById('editBlogId').value);
            const title = document.getElementById('editBlogTitle').value;
            const category = document.getElementById('editBlogCategory').value;
            const content = document.getElementById('editBlogContent').value;
            const editBlogImageInput = document.getElementById('editBlogImage');
            const useUrlRadio = document.getElementById('useUrlRadio');
            const editImageUrl = document.getElementById('editImageUrl').value;
            
            const blog = blogData.find(b => b.id === id);
            if (blog) {
                blog.title = title;
                blog.category = category;
                blog.content = content;
                
                // 处理图片更新
                if (editBlogImageInput.files && editBlogImageInput.files[0]) {
                    // 上传了新图片文件
                    // 模拟上传过程，为图片创建一个唯一ID
                    const timestamp = Date.now();
                    const randomId = Math.floor(Math.random() * 1000000000);
                    const fileName = `${timestamp}-${randomId}.${editBlogImageInput.files[0].name.split('.').pop()}`;
                    blog.image = `/uploads/${fileName}`;
                    // 显示成功提示
                    showToast('图片上传成功！', 'success');
                } else if (useUrlRadio.checked && editImageUrl) {
                    // 如果使用URL
                    blog.image = editImageUrl;
                } else if (document.getElementById('editImagePreview').classList.contains('hidden')) {
                    // 如果删除了图片预览，设置为空
                    blog.image = '';
                }
                // 否则保持原有图片
                
                // 保存更新后的数据
                saveData();
                
                closeEditModal();
                renderAdminTable();
                renderBlogs(blogData);
                showToast('博客已更新！', 'success');
            }
        });
        
        // 修复编辑模态框中的图片上传点击事件
        const editImageUploadArea = document.querySelector('#editModal .border-dashed');
        const editBlogImageInput = document.getElementById('editBlogImage');
        if (editImageUploadArea && editBlogImageInput) {
            editImageUploadArea.addEventListener('click', () => {
                editBlogImageInput.click();
            });
            
            editBlogImageInput.addEventListener('click', (e) => {
                e.stopPropagation();
            });
            
            // 添加图片选择后的预览功能
            editBlogImageInput.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        const editCurrentImage = document.getElementById('editCurrentImage');
                        const editImagePreview = document.getElementById('editImagePreview');
                        
                        if (editCurrentImage && editImagePreview) {
                            editCurrentImage.src = e.target.result;
                            editImagePreview.classList.remove('hidden');
                        }
                    }
                    
                    reader.readAsDataURL(this.files[0]);
                }
            });
        }
        
        // 添加图片URL处理函数，确保图片路径正确并且提供错误回退机制
        function getImageUrl(imagePath) {
            // 如果路径为空或未定义，提供默认随机图片
            if (!imagePath) {
                const randomId = Math.floor(Math.random() * 100);
                return `https://picsum.photos/id/${randomId}/600/400`;
            }
            
            // 保留原始图片URL，包括DataURL格式和其他可能的格式
            // 只有在确定图片URL无效时才提供默认图片
            return imagePath;
        }
        
        // 图片加载失败处理函数
        function handleImageError(imgElement) {
            // 当图片加载失败时，使用随机默认图片替换
            const randomId = Math.floor(Math.random() * 100);
            imgElement.src = `https://picsum.photos/id/${randomId}/600/400`;
            imgElement.onerror = null; // 防止无限循环
        }
        
        // 修复loadMoreBtn未定义的错误 - 删除相关代码
        // const loadMoreBtn = null;
        // 注释掉loadMoreBtn相关的事件监听代码

        // 新建博客按钮
        newBlogBtn.addEventListener('click', () => {
            closeAdmin.click();
            document.getElementById('blogTitle').focus();
            window.scrollTo({
                top: writeSection.offsetTop - 100,
                behavior: 'smooth'
            });
        });
        
        // 博客表单提交
        blogForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const title = document.getElementById('blogTitle').value;
            const category = document.getElementById('blogCategory').value;
            const content = document.getElementById('blogContent').value;
            const blogImageInput = document.getElementById('blogImage');
            
            if (title && category && content) {
                // 检查是否有选择图片
                let imageUrl;
                if (blogImageInput.files && blogImageInput.files[0]) {
                    // 在实际环境中，这里应该上传图片到服务器并获取URL
                    // 这里为了演示，使用模拟上传后的URL
                    imageUrl = `/uploads/${blogImageInput.files[0].name}`;
                } else {
                    // 没有选择图片时使用默认随机图片
                    imageUrl = 'https://picsum.photos/id/' + Math.floor(Math.random() * 100) + '/600/400';
                    
                    const newBlog = {
                        id: Date.now(),
                        title,
                        category,
                        content,
                        image: imageUrl,
                        date: new Date().toISOString().split('T')[0],
                        author: 'dilyar',
                        likes: 0
                    };
                    
                    blogData.unshift(newBlog);
                    saveData();
                    blogForm.reset();
                    renderBlogs(blogData);
                    showToast('博客发布成功！', 'success');
                }
            }
        });

        // 取消写博客
        cancelBlog.addEventListener('click', () => {
            blogForm.reset();
            showToast('已取消写作', 'info');
        });

        // 分类过滤
        categoryBtns.forEach(btn => {
            btn.addEventListener('click', function() {
                // 更新按钮状态
                categoryBtns.forEach(b => {
                    b.classList.remove('active', 'bg-primary', 'text-white');
                    b.classList.add('bg-gray-100', 'hover:bg-gray-200');
                });
                
                this.classList.add('active', 'bg-primary', 'text-white');
                this.classList.remove('bg-gray-100', 'hover:bg-gray-200');
                
                const category = this.dataset.category;
                filterBlogs(category);
            });
        });

        // 排序
        sortBy.addEventListener('change', () => {
            const category = document.querySelector('.category-btn.active').dataset.category;
            filterBlogs(category);
        });

        // 过滤和排序博客
        function filterBlogs(category) {
            let filtered = [...blogData];
            
            // 按分类过滤
            if (category !== 'all') {
                filtered = filtered.filter(blog => blog.category === category);
            }
            
            // 按选择的方式排序
            if (sortBy.value === 'latest') {
                filtered.sort((a, b) => new Date(b.date) - new Date(a.date));
            } else if (sortBy.value === 'popular') {
                filtered.sort((a, b) => b.likes - a.likes);
            }
            
            renderBlogs(filtered);
        }

        // 加载更多按钮（模拟）
        loadMoreBtn.addEventListener('click', () => {
            // 模拟加载中
            loadMoreBtn.innerHTML = '加载中...';
            
            setTimeout(() => {
                // 复制现有数据创建新数据
                const newBlogs = blogData.slice(0, 3).map(blog => ({
                    ...blog,
                    id: Date.now() + Math.random(),
                    title: blog.title + ' (副本)',
                    date: new Date().toISOString().split('T')[0],
                    author: 'dilyar'
                }));
                
                // 合并数据
                blogData.push(...newBlogs);
                
                // 重新渲染
                const category = document.querySelector('.category-btn.active').dataset.category;
                filterBlogs(category);
                
                loadMoreBtn.innerHTML = '加载更多';
                
                showToast('已加载更多内容！', 'info');
            }, 1000);
        });

        // 显示消息提示
        function showToast(message, type = 'info') {
            toastMessage.textContent = message;
            
            // 设置图标
            if (type === 'success') {
                toastIcon.className = 'fa fa-check-circle text-green-400';
                toast.classList.add('bg-green-50', 'text-green-800', 'border-l-4', 'border-green-400');
            } else if (type === 'error') {
                toastIcon.className = 'fa fa-exclamation-circle text-red-400';
                toast.classList.add('bg-red-50', 'text-red-800', 'border-l-4', 'border-red-400');
            } else {
                toastIcon.className = 'fa fa-info-circle text-blue-400';
                toast.classList.add('bg-blue-50', 'text-blue-800', 'border-l-4', 'border-blue-400');
            }
            
            // 显示toast
            toast.classList.remove('translate-x-full');
            toast.classList.add('translate-x-0');
            
            // 3秒后自动隐藏
            setTimeout(() => {
                toast.classList.remove('translate-x-0');
                toast.classList.add('translate-x-full');
                
                // 清除样式
                setTimeout(() => {
                    toast.classList.remove('bg-green-50', 'text-green-800', 'border-l-4', 'border-green-400',
                                        'bg-red-50', 'text-red-800', 'border-l-4', 'border-red-400',
                                        'bg-blue-50', 'text-blue-800', 'border-l-4', 'border-blue-400');
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html>











